!function(a){"use strict";var b=function(){this.audioContext=this.getAudioContext(),this.buffer=null,this.WEB_AUDIO_API_NOT_SUPPORTED=1001,this.REQUEST_PROGRESS=101,this.REQUEST_LOAD=102,this.REQUEST_ERROR=1102,this.REQUEST_ABORT=104;var a=this,b=Object.getNotifier(this);Object.defineProperty(this,"status",{get:function(){return parseInt(status,10)},set:function(a){a!==status&&(b.notify({type:"update",name:"status"}),status=a)}}),Object.observe(this,function(b){switch(a.status){case a.WEB_AUDIO_API_NOT_SUPPORTED:console.error("WEB_AUDIO_API_NOT_SUPPORTED");break;case a.REQUEST_PROGRESS:console.log("REQUEST_PROGRESS");break;case a.REQUEST_LOAD:console.log("REQUEST_LOAD");break;case a.REQUEST_ERROR:console.error("REQUEST_ERROR");break;case a.REQUEST_ABORT:console.error("REQUEST_ABORT");break;default:console.error("STATUS NOT IMPLEMENTED")}})};b.prototype.getAudioContext=function(){try{return a.AudioContext=a.AudioContext||a.webkitAudioContext,new a.AudioContext}catch(b){return this.status=this.WEB_AUDIO_API_NOT_SUPPORTED,null}},b.prototype.loadBufferFromURI=function(a,b){if(null===this.audioContext)return!1;b.onsuccess=b.onsuccess||function(){},b.onerror=b.onerror||function(){};var c=this,d=new XMLHttpRequest;return d.open("GET",a,!0),d.responseType="arraybuffer",d.addEventListener("progress",function(a){c._requestProgress(a)},!1),d.addEventListener("load",function(a){c._requestLoad(a,this,b)},!1),d.addEventListener("error",function(){c._requestError(event,this,b)},!1),d.addEventListener("abort",function(){c._requestAbort()},!1),d.send(null),!0},b.prototype._requestProgress=function(a){this.status=this.REQUEST_PROGRESS,a.lengthComputable},b.prototype._requestLoad=function(a,b,c){200===b.status?(this.buffer=b.response,this.status=this.REQUEST_LOAD,c.onsuccess(this)):this._requestError(a,b,c)},b.prototype._requestError=function(a,b,c){this.status=this.REQUEST_ERROR,c.onerror(b)},b.prototype._requestAbort=function(){this.status=this.REQUEST_ABORT},a.Pulse=b}(window);